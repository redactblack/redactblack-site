<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RedactBlack</title>
  <meta name="description" content="RedactBlack — focused software." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="intro">
  <canvas id="particles"></canvas>	

  <header class="nav">
    <a class="brand" href="index.html" aria-label="RedactBlack Home">RedactBlack</a>
    <nav class="links">
      <a href="apps.html">Apps</a>
      <a href="contact.html">Contact</a>
      <a href="privacy.html">Privacy</a>
    </nav>
  </header>

  <main class="center hero">
    <img class="logo" src="assets/logo-redactblack.png" alt="RedactBlack logo" />

    <p class="tagline">Focused software. Built with intention.</p>

    
    
  </main>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <script>
window.addEventListener("scroll",()=>{
  const scrollY = window.scrollY || window.pageYOffset;
  const offset = 50 + scrollY * 0.02;
  document.documentElement.style.setProperty("--my", offset + "%");
});
  </script>

  <script>
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d", { alpha:true });

let particles = [];
const COUNT = 90;

let mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };

/* --- Logo center tracking for depth lighting --- */
let logoCenter = { x: window.innerWidth/2, y: window.innerHeight/2 };

function updateLogoCenter(){
  const logo = document.querySelector(".logo");
  if(!logo) return;

  const rect = logo.getBoundingClientRect();
  logoCenter.x = rect.left + rect.width/2;
  logoCenter.y = rect.top + rect.height/2;
}

updateLogoCenter();
window.addEventListener("resize", updateLogoCenter);

window.addEventListener("pointermove", e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;

  const x = (e.clientX/window.innerWidth)*100+"%";
  const y = (e.clientY/window.innerHeight)*100+"%";
  document.documentElement.style.setProperty("--mx",x);
  document.documentElement.style.setProperty("--my",y);
  /* --- Cinematic logo parallax --- */
const px = (e.clientX / window.innerWidth - 0.5) * 12;
const py = (e.clientY / window.innerHeight - 0.5) * 8;

document.documentElement.style.setProperty("--lx", px + "px");
document.documentElement.style.setProperty("--ly", py + "px");
}, { passive:true });

function resize(){
  const dpr = window.devicePixelRatio || 1;
  canvas.width = window.innerWidth * dpr;
  canvas.height = window.innerHeight * dpr;
  canvas.style.width = window.innerWidth + "px";
  canvas.style.height = window.innerHeight + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}

function createParticles(){
  particles = [];
  for(let i=0;i<COUNT;i++){
    const depth = Math.random();
    particles.push({
      x: Math.random()*window.innerWidth,
      y: Math.random()*window.innerHeight,
      depth,
      r: 0.3 + depth*1.8,
      vx: (Math.random()-0.5)*(0.1 + depth*0.25),
      vy: (Math.random()-0.5)*(0.1 + depth*0.25),
      a: 0.15 + depth*0.6
    });
  }
}

window.addEventListener("resize", ()=>{
  resize();
  createParticles();
});

resize();
createParticles();

let running = true;

document.addEventListener("visibilitychange",()=>{
  running = !document.hidden;
  if(running) animate();
});

function animate(){
  if(!running) return;

/* --- Cinematic particle trails --- */
ctx.fillStyle = "rgba(0,0,0,0.18)";
ctx.fillRect(0,0,canvas.width,canvas.height);
  updateLogoCenter();

  for(const p of particles){

    const dx = (mouse.x - window.innerWidth/2) * (0.00001 + p.depth*0.00004);
    const dy = (mouse.y - window.innerHeight/2) * (0.00001 + p.depth*0.00004);

    p.x += p.vx + dx;
    p.y += p.vy + dy;

    if(p.x<0||p.x>canvas.width) p.vx*=-1;
    if(p.y<0||p.y>canvas.height) p.vy*=-1;

    /* --- Cinematic depth lighting --- */
const dxLogo = p.x - logoCenter.x;
const dyLogo = p.y - logoCenter.y;
const dist = Math.sqrt(dxLogo*dxLogo + dyLogo*dyLogo);

const glowRadius = 260; // how far logo light reaches
let intensity = 0;

if(dist < glowRadius){
  intensity = (1 - dist/glowRadius) * 0.65;
}

ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);

ctx.fillStyle =
  "rgba(255,255,255," + (p.a + intensity) + ")";

ctx.fill();
  }

  requestAnimationFrame(animate);
}
animate();
</script>

<footer class="siteFooter">
  © <span id="year"></span> RedactBlack
</footer>

</body>
</html>