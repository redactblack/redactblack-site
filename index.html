<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RedactBlack</title>
  <meta name="description" content="RedactBlack — focused software." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="intro">
  <canvas id="particles"></canvas>	

  <header class="nav">
    <a class="brand" href="index.html" aria-label="RedactBlack Home">RedactBlack</a>
    <nav class="links">
      <a href="apps.html">Apps</a>
      <a href="contact.html">Contact</a>
      <a href="privacy.html">Privacy</a>
    </nav>
  </header>

  <main class="center hero">
    <div class="logoWrap">
  <img class="logo" src="assets/logo-redactblack.png" alt="RedactBlack logo" />
</div>

    <p class="tagline">Independent mobile software studio</p>

    
    
  </main>
  
  <script>
window.addEventListener("scroll",()=>{
  const scrollY = window.scrollY || window.pageYOffset;
  const offset = 50 + scrollY * 0.02;
  document.documentElement.style.setProperty("--my", offset + "%");
});
  </script>

  <script>
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d", { alpha:true });

let particles = [];
const COUNT = window.innerWidth > 900 ? 160 : 90;

// --- Desktop speed tuning ---
const isDesktop = window.innerWidth > 900;
const speedMultiplier = isDesktop ? 2.1 : 1;

// --- Volumetric logo halo ---
const haloRadius = 320;
const maxDist = 140;
let pulseTime = 0;
let camTime = 0;
let camX = 0;
let camY = 0;
const haloColor = { r:120, g:160, b:255 }; // cinematic blue

let mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };

/* --- Logo center tracking for depth lighting --- */
let logoCenter = { x: window.innerWidth/2, y: window.innerHeight/2 };

function updateLogoCenter(){
  const logo = document.querySelector(".logo");
  if(!logo) return;

  const rect = logo.getBoundingClientRect();
  logoCenter.x = rect.left + rect.width/2;
  logoCenter.y = rect.top + rect.height/2;
}

updateLogoCenter();
window.addEventListener("resize", updateLogoCenter);

window.addEventListener("pointermove", e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;

  const x = (e.clientX/window.innerWidth)*100+"%";
  const y = (e.clientY/window.innerHeight)*100+"%";
  document.documentElement.style.setProperty("--mx",x);
  document.documentElement.style.setProperty("--my",y);

  /* --- Cinematic logo parallax --- */
  const px = (e.clientX / window.innerWidth - 0.5) * 12;
  const py = (e.clientY / window.innerHeight - 0.5) * 8;

document.documentElement.style.setProperty("--lx", px + "px");
document.documentElement.style.setProperty("--ly", py + "px");
}, { passive:true });

function resize(){
  const dpr = window.devicePixelRatio || 1;
  canvas.width = window.innerWidth * dpr;
  canvas.height = window.innerHeight * dpr;
  canvas.style.width = window.innerWidth + "px";
  canvas.style.height = window.innerHeight + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}

function createParticles(){
  particles = [];
  for(let i=0;i<COUNT;i++){
    const depth = Math.random();
    particles.push({
  x: Math.random()*window.innerWidth,
  y: Math.random()*window.innerHeight,
  depth,

  // cinematic depth sizing
  r: 0.4 + depth*2.4,

  // layered velocity
  vx: (Math.random()-0.5)*(0.12 + depth*0.28) * speedMultiplier,
  vy: (Math.random()-0.5)*(0.12 + depth*0.28) * speedMultiplier,

  // alpha based on depth
  a: 0.10 + depth*0.7
});
  }
}

window.addEventListener("resize", ()=>{
  resize();
  createParticles();
});

resize();
createParticles();

let running = true;

let lastTime = performance.now();

document.addEventListener("visibilitychange",()=>{
  running = !document.hidden;
  if(running) animate();
});

function animate(time){
  if(!running) return;

const delta = (time - lastTime) / 16.666; // normalize to 60fps
lastTime = time;

/* --- Cinematic particle trails --- */
ctx.fillStyle = isDesktop
  ? "rgba(0,0,0,0.05)"
  : "rgba(0,0,0,0.08)";
ctx.fillRect(0,0,canvas.width,canvas.height);
pulseTime += 0.008 * delta; // aura breathing speed
/* --- Cinematic camera drift --- */
camTime += 0.004 * delta;

camX = Math.sin(camTime) * 10;
camY = Math.cos(camTime * 0.8) * 6;
  updateLogoCenter();

  /* --- Cinematic particle connections --- */

ctx.lineWidth = 0.4;

for(let i=0;i<particles.length;i++){
  const p1 = particles[i];

  for(let j=i+1;j<particles.length;j++){
    const p2 = particles[j];

    const dx = p1.x - p2.x;
    const dy = p1.y - p2.y;
    const dist = Math.sqrt(dx*dx + dy*dy);

    if(dist < maxDist){

      // depth-aware opacity
      const depthMix = (p1.depth + p2.depth) * 0.5;
      const alpha = (1 - dist/maxDist) * 0.18 * depthMix;

      ctx.beginPath();
      ctx.moveTo(p1.x + camX, p1.y + camY);
      ctx.lineTo(p2.x + camX, p2.y + camY);

      ctx.strokeStyle = "rgba(120,160,255," + alpha + ")";
      ctx.stroke();
    }
  }
}

  for(const p of particles){

    // cinematic perspective drift (depth layered)
const perspective = 0.000006 + p.depth * 0.00005;

const dx = (mouse.x - window.innerWidth/2) * perspective;
const dy = (mouse.y - window.innerHeight/2) * perspective;

    p.x += (p.vx + dx) * delta;
    p.y += (p.vy + dy) * delta;

    if(p.x<0||p.x>canvas.width) p.vx*=-1;
    if(p.y<0||p.y>canvas.height) p.vy*=-1;

    /* --- Cinematic depth lighting --- */
const dxLogo = p.x - logoCenter.x;
const dyLogo = p.y - logoCenter.y;
const dist = Math.sqrt(dxLogo*dxLogo + dyLogo*dyLogo);

let intensity = 0;
let haloMix = 0;

// soft white glow (existing behavior)
if(dist < 260){
  intensity = (1 - dist/260) * 0.65;
}

// volumetric blue halo (new)
if(dist < haloRadius){
  const pulse = 0.75 + Math.sin(pulseTime) * 0.25;
  haloMix = (1 - dist/haloRadius) * 0.35 * p.depth * pulse;
}

ctx.beginPath();
ctx.arc(p.x + camX, p.y + camY, p.r, 0, Math.PI*2);


const r = 255 - haloMix * (255 - haloColor.r);
const g = 255 - haloMix * (255 - haloColor.g);
const b = 255 - haloMix * (255 - haloColor.b);
const alpha = p.a + intensity + haloMix * 0.4;

ctx.fillStyle = "rgba(" + r + "," + g + "," + b + "," + alpha + ")";


// subtle atmospheric depth blur
ctx.filter = isDesktop ? "none" : `blur(${(1 - p.depth) * 0.8}px)`;

ctx.fill();

ctx.filter = "none";

  }

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);
</script>

<footer class="siteFooter">
  © <span id="year"></span> RedactBlack
</footer>

<script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>